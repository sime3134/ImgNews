<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ImgNews</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <link type="text/css"  rel="stylesheet"  href="/style.css" >
        <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300&display=swap" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/2b9398fef2.js" crossorigin="anonymous"></script>
    </head>

    <body>
        <header>
            <h1> <a href="/news"><img src="/news.png" id="logo"></a>ImgNews</h1>
            <h2> -Your news in pictures</h2>
        </header>

        <nav class="navbar navbar-expand-lg" id="nav">
            <div class="container-fluid">
                <a class="navbar-brand" href="/news"><i id="home" class="fa-solid fa-house"></i> Home</a>

                 <ul class="navbar-nav me-auto" >
                    <a class="nav-link ms-5" aria-current="page" href="/news?category=general"><i id="general"
                             class="fa-solid fa-newspaper"></i> General</a>
                    <a class="nav-link ms-5" href="/news?category=sports"><i id="sports"
                             class="fa-solid fa-football"></i> Sports</a>
                    <a class="nav-link ms-5" href="/news?category=entertainment"><i id="entertainment"
                             class="fa-solid fa-masks-theater"></i> Entertainment</a>
                 </ul>
            </div>        
        </nav>

        <section id="news">
            <div class="container text-center">
                <div class="row">

                    <div class="col-4">
                        <img src="" id = "newsImg0" class="newsPic">
                    </div>

                    <div class="col-4">
                        <img src="" id="newsImg1" class="newsPic">
                    </div>

                    <div class="col-4">                     
                        <img src="" id="newsImg2" class="newsPic">
                    </div> 


                </div>

                <div class="row">
                    <div class="col-4">
                        <img src="" id="newsImg3" class="newsPic">
                    </div>

                    <div class="col-4">                      
                        <img src="" id="newsImg4" class="newsPic">
                    </div>

                    <div class="col-4">                     
                        <img src="" id="newsImg5" class="newsPic">
                    </div>
                </div>  
            </div>
        </section>




        <section>   
            <div class="container text-center">
                <div class="row justify-content-center">
                    
                    <div class="col-6">
                        <button type="button" id="articleButton"class="btn btn-light" data-toggle="modal" data-target="#myModal">Read article here</button>
                        
                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="title" aria-hidden="true">
                            <div class="modal-dialog" id="myInput" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" id="title"> </h4>
                                    </div>
                                    <div class="modal-body">
                                        <p id ="article"> </p>
                                    </div>
                
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </section>   

        <section>
            <div class="container text-right">
                <div class="row justify-content-end" id="infoRow">
                    <div class="col-2">
                        <p class="p1">Number of tries:</p>
                        <p class="p1" id="numberOfTries"> </p>
                    </div>
                </div>
                <div class="row justify-content-end">
                    <div class="col-2">
                        <button type="button" id="infoButton" class="btn btn-light btn-sm" data-toggle="modal" data-target="#myModalTwo">What is this?</button>
                        
                        <div class="modal fade" id="myModalTwo" tabindex="-1" role="dialog" aria-labelledby="title" aria-hidden="true">
                            <div class="modal-dialog" id="myInputTwo" role="document">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <p> Due to security reasons we choose not to display news that may be inappropriate. Here you can find how many attempts it took to retrieve the articles that are presented. </p>
                                    </div>
                
                                </div>
                            </div>
                        </div>
    
                    </div>
            </div>
        </section>

        <section id="footer">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-c-circle" viewBox="0 0 16 16">
                <path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8Zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM8.146 4.992c-1.212 0-1.927.92-1.927 2.502v1.06c0 1.571.703 2.462 1.927 2.462.979 0 1.641-.586 1.729-1.418h1.295v.093c-.1 1.448-1.354 2.467-3.03 2.467-2.091 0-3.269-1.336-3.269-3.603V7.482c0-2.261 1.201-3.638 3.27-3.638 1.681 0 2.935 1.054 3.029 2.572v.088H9.875c-.088-.879-.768-1.512-1.729-1.512Z"/>
              </svg> 2023</p>
        </section>

        <script>


            let data = [(${json})];
            console.log(data);
            let img = data.imgData;

            for (let i = 0; i < img.length; i++){
                const newsImg = "data:image/png;base64," + img[i];
                document.getElementById('newsImg'+i).src = newsImg;
            };

            let articleDescscription = data.originalArticle.description;
            document.getElementById('article').innerHTML = articleDescscription; 

            let articleContent= data.originalArticle.content;
            document.getElementById('article').innerHTML = articleContent; 

            let title = data.originalArticle.title;
            document.getElementById('title').innerHTML = title;

            let numberOfTries = [(${numberOfTries})];
            document.getElementById('numberOfTries').innerHTML = numberOfTries;

            $('#myModal').on('shown.bs.modal', function () {
            $('#myInput').trigger('focus')
            })

            $('#myModalTwo').on('shown.bs.modal', function () {
            $('#myInputTwo').trigger('focus')
            })

        </script>

    </body>

</html>